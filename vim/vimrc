" --- GENERAL ---

" https://github.com/changemewtf/no_plugins
" enter the current millenium
set nocompatible

" enable syntax and plugins
syntax enable
filetype plugin on

" file autocomplete with subfolders
set path+=**
set wildmenu

" tweaks for the file browser
let g:netrw_banner=0        " disable annoying banner
let g:netrw_browse_split=4  " open in prior window
let g:netrw_altv=1          " open splits to the right
let g:netrw_liststyle=3     " tree view
" TODO: for some reason this makes vim start 10x slower
"let g:netrw_list_hide=netrw_gitignore#Hide()
"let g:netrw_list_hide.=',\(^\|\s\s\)\zs\.\S\+'

" the following settings are copied from somewhere and
" are the default "sane" things to have in vimrc
" (I guess)

" general
set backspace=indent,eol,start
set linebreak
set number
set relativenumber
set ruler
set showmatch
set textwidth=100
set undolevels=1000
set visualbell
" show the typed commands in the status line
set showcmd

" search
set hlsearch
set ignorecase
set incsearch
set smartcase

" indentation
set autoindent
set expandtab
set shiftwidth=4
set smartindent
set smarttab
set softtabstop=4

" leader keys
let g:mapleader = "\<Space>"
let g:maplocalleader = ','

" --- PLUGINS ---

" automagically install/update vim-plug
if empty(glob('~/.vim/autoload/plug.vim'))
  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs
    \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
endif

call plug#begin('~/.vim/plugged')
Plug 'altercation/vim-colors-solarized'
Plug 'liuchengxu/vim-which-key'
Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': './install --all' }
call plug#end()

" vim-which-key configuration
" display help after 1000ms
set timeoutlen=1000
" for which keys to display help
nnoremap <silent> <Leader> :<c-u>WhichKey '<Space>'<CR>
nnoremap <silent> <LocalLeader> :<c-u>WhichKey ','<CR>

" --- COLORS ---

" automatically switch between light and dark theme based on
" iTerm's theme (which is in turn based on OS)
if $ITERM_PROFILE == "Dark"
    set background=dark
else
    set background=light
endif

" use solarized colors <3
colorscheme solarized

" real men use true color support
set termguicolors

" --- KEYS ---

" disable q: and Q because I always press them
" by mistake and I never actually use them
map q: <Nop>
nnoremap Q <nop>

" rebind CTRL+P to open fzf
" TODO: use the leader key
nnoremap <Leader>f :FZF<CR>

